<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Fast Scrolling Demo</title>

    <!-- INCLUDING JQUERY-->
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <link rel="stylesheet" href="css/movies.css" />
  </head>

  <body>
    <caption>
      Movie Details
    </caption>
    <div class="table-container">
      <!-- TABLE CONSTRUCTION-->
      <table id="movie-table">
        <thead>
          <tr>
            <!-- HEADING FORMATION -->
            <th scope="col">Title</th>
            <th>Year</th>
            <th>Cast</th>
            <th>Genres</th>
          </tr>
        </thead>

        <tbody id="movie-table-body" class="tbody"></tbody>
      </table>

      <template id="source"> </template>
    </div>
    <script src="../../dist/fleet.js"></script>

    <script type="text/javascript">
      let view;

      $.ajax({
        url: 'datasource/movies.json',
        type: 'Get',
        dataType: 'json',
        success: function (data) {
          var movie = '';
          $.each(data, function (key, value) {
            movie += '<tr>';
            movie += '<td scope="row" data-label="Title">' + value.title + '</td>';
            movie += '<td data-label="Year">' + value.year + '</td>';
            movie += '<td data-label="Cast">' + value.cast + '</td>';
            movie += '<td data-label="Genre">' + value.genres + '</td>';
            movie += '</tr>';
            // $('#movie-table').append(movie);
            $('#source').append(movie);
          });

          const target = document.getElementById('movie-table-body');
          view = new fleet.BaseView(source, target, [new fleet.Partial(0, 20)]);
        },
        error: function (jqXHR, textStatus, errorThrown) {
          alert('Error: ' + textStatus + ' - ' + errorThrown);
        },
      });
    </script>
  </body>
</html>
